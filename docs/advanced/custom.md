# Настройка библиотеки схем

У вас есть базовая библиотека схем, поставляемая с библиотекой/плагином/утилитой или скачанная с [страницы проекта](https://github.com/colorer/Colorer-schemes/releases).

Как настроить базовую библиотеку под свои предпочтения? Ниже приведены ответы на часто задаваемые вопросы по этой теме.

Модифицировать базовую библиотеку нужно только в редких случаях. Все настройки необходимо делать во вне, не трогая базовую библиотеку. Это
позволит в дальнейшем легко обновиться на новую версию. Если вы, всё же, решили изменить базовую библиотеку, создав свою библиотеку, то через параметры приложения можно указать до неё путь.

## Как подключить собственную схему?

Своя схема у вас уже создана, процесс создания тут не рассматривается.

Возможны несколько вариантов, но рекомендуемым является указание в параметрах приложения пути до директории с hrc файлами.

Остальные варианты перечисленны ниже:

* Использовать папку `auto`. В зависимости от используемого формата поставки базовой библиотеки, папка `auto` может находиться по пути `/hrc/auto` или `/auto` относительно корня библиотеки схем. Этот вариант совпадает с предыдущим, только пользовательские схемы хранятся внутри базовой библиотеки. Папка auto загружается после загрузки базовых схем (если не меняли порядок в catalog.xml). Для этого можно:
    * Создать в папке `auto` аналог proto.hrc и прописать туда прототипы своих схем, а в папку `/auto/types` положить описание типа. Минимальный (пустой) пример файла прототипов
      есть в дистрибутиве `/auto/empty.hrc`.
      Внимание: empty.hrc служит для примера, изменять его не рекомендуется, т.к. при обновлении изменения потеряются.
    * Можно обойтись без отдельного файла прототипов, а разместить схемы непосредственно в папке `/auto`. Прототип в этом случае должен быть определён в самой схеме после
      тега <hrc>, без указания location.
* Изменить `catalog.xml`. Добавить в блок `<hrс-sets>` путь до папки или файла, где содержаться прототипы или схемы файлов.
* Изменить `proto.hrc` базовой библиотеки. Добавить свой прототип и путь до схемы типа файла.


## Как изменить существующую схему/прототип?

Структура описания прототипа в кратком виде выглядит так:

```xml
  <prototype name="" group="" description="">
    <location link=""/>
    <filename weight=""></filename>
    <firstline weight=""></firstline>
    <parameters>
      <param name="" value="" description=""/>
    </parameters>
  </prototype>
```

В зависимости от того, что вы хотите изменить в описании, могут использоваться разные способы.

### Имя группы или описание

Идем по пути подключения собственной схемы, где в hrc файл добавляем исправленное описание прототипа. При этом путь до файла location должен быть указан относительно файла с описанием.

### Изменение схемы

Для того чтобы в существующей схеме использовался пользовательский hrc файл, взамен базового, необходимо идти по пути подключения собственной схемы, но использовать старое имя.
Берем за основу базовую схему изменяемого типа. Исправляем её как требуется. Далее идем по пути подключения собственной схемы, где в hrc файл добавляем исправленное описание прототипа. В location указываем путь до файла с измененной схемой, относительно файла с описанием прототипа.

Загрузка схем идет в порядке следования в catalog.xml и указанных в нем hrc файлах. При совпадении имен прототипов старый будет удален и загрузится новый.

### Как изменить условия выбора схемы?

За условия выбора схемы отвечают атрибуты `filename` и `firstline`. Для их изменения необходимо добавить полное их описание в hrcsettings.xml для указанного прототипа. Добавление одного любого атрибута `filename` или `firstline` удаляет все указанные ранее в прототипе значения.


### Как изменить параметры схемы?

Для изменения значений параметров в блоке `parameters` необходимо добавить их в hrcsettings.xml для указанного прототипа. Новые параметры добавляются, для совпадающийх по имени значения и описания обновляются.